# Clang tooling

В этом проекте написана небольшая утилита с использованием [clang tooling](https://clang.llvm.org/docs/LibTooling.html).

Поставьте необходимые пакеты:
```bash
sudo apt-get install clang-14 clang-tools-14 llvm-14-dev libclang-14-dev
```

Утилита проверяет имена, используемые в коде, на соответствие Google Styleguide,
а также ищет потенциальные опечатки в этих именах.

Решение реализовано в файле `check_names.cpp`.

## Styleguide

Имена сущностей в коде соответствуют описанным здесь правилам: https://google.github.io/styleguide/cppguide.html#Naming.
Впрочем, есть некоторые отличия и исключения:

1. Проверяются только имена переменных, членов классов, типов, констант, функций и перечислений.
2. Для констант и constexpr переменных всегда используется стиль kConstName, даже если это член класса.
3. Есть отдельное правило для заглавных букв в тех именах, где они допустимы (т.е. не в именах переменных, членах классов). В имени
могут встречаться последовательности из заглавных букв, при этом их длина должна быть не меньше 3 без учета начала следующего слова.
Например, `BuildDSUnion` невалидное имя, т.к. длина `DS` равна 2, а `U` начинает следующее слово. `BuildDSU` или
`CreateASTMatcher` --- примеры валидных имен. Имя не может целиком состоять из заглавных букв.
4. В именах всех сущностей запрещены цифры.

## Поиск опечаток

В программе может быть передана опция `-dict path_to_dict`, где `path_to_dict` --- словарь, текстовый файл, в каждой строке которого
записано одно слово. В этом случае утилита также производит поиск опечаток. Если переменная удовлетворяет правилам выше,
то для каждого слова в ее имени ищет "ближайшее" к нему из словаря. В качестве меры близости используется
[расстояние Левенштейна](https://en.wikipedia.org/wiki/Levenshtein_distance). Пусть слово из имени `x`, ближайшее к нему `y`,
а `d(x, y)` --- расстояние между ними.
Тогда опечаткой считается случай `0 < d(x, y) < 4`. Проверка делается только для слов длины > 3.

## Тестирование

Тесты находятся в директории `tests`.
Там же в файлах `result.txt` записаны правильные (наверное) ответы на них.
Тесты запускаются с помощью таргета `test_check_names`, который запускает скрипт,
посимвольно сравнивающий вывод программы и правильный вывод (с помощью `diff`).
